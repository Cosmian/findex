---
name: Benches

on: workflow_dispatch

jobs:
  services:
    # Label used to access the service container
    redis:
      # Docker Hub image
      image: redis
        # Set health checks to wait until redis has started
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
  bench:
    uses: Cosmian/reusable_workflows/.github/workflows/cargo-bench.yml@develop
    with:
      toolchain: stable
      features: test-utils,redis-mem,sqlite-mem,rust-mem
      force: true
